<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <!-- <link rel="icon" href="../favicon.png" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    
		<link href="../_app/immutable/assets/0.B1HFxwMM.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.DNDbD3y4.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BWUehsg5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CrGyUMwP.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.GELVEbAP.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C1FmrZbK.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/uW2q-9yC.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.DeQCknTB.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/ByxmXXB_.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/5.BVa_mqeL.js">
    <title>Cade Lueker</title>
  </head>
  <body data-sveltekit-preload-data="hover" class="d-flex flex-column min-vh-100">
    <div style="display: contents">  <nav class="navbar navbar-expand-lg nav-underline svelte-o3pmng" data-bs-theme="dark"><div class="container-fluid"><button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation" data-svelte-h="svelte-1eytg9k"><span class="navbar-toggler-icon"></span></button> <span class="navbar-brand mb-0 h1 svelte-o3pmng" data-svelte-h="svelte-1vnwv4d">Cade Lueker</span> <div class="collapse navbar-collapse" id="navbarNav"><ul class="navbar-nav ms-auto" style="margin-right: 10px;"><li class="nav-item"><a class="nav-link " href="/">Home</a></li> <li class="nav-item"><a class="nav-link " href="/about">About</a></li> <li class="nav-item"><a class="nav-link active" href="/blog">Blog</a></li></ul></div></div> </nav> <div class="all-content svelte-1b1lzt9"><div class="blog-post svelte-e0j7s0"><article><h1>Can Zig, Go, or Rust compete with C++ for Competitive Programming?</h1> <p>Published: 05-22-25</p> <nav class="toc" data-svelte-h="svelte-thy4tx"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#competitive-programming">Competitive Programming</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#handling-input-with-c">handling input with C++</a></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#getting-input-with-rust">Getting input with Rust</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#handling-file-input">handling file input</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#handling-standard-input">handling standard input</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#great-starter-template">great starter template</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#making-it-a-module">making it a module</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#making-it-type-polymorphic">making it type polymorphic</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#adding-file-or-standard-input">adding file or standard input</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#final-template">final template</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#using-the-template">using the template</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#getting-input-with-go">Getting input with Go</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#how-to-set-stdin">How to set Stdin</a></li></ol></li><li class="toc-item toc-item-h1"><a class="toc-link toc-link-h1" href="#getting-input-with-zig">Getting input with Zig</a><ol class="toc-level toc-level-2"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#importing-c-libraries-with-zig">importing C libraries with Zig</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#string-representations-in-zig">String representations in Zig</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#wrapping-c-functions-with-zig">Wrapping C functions with Zig</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#setting-standard-input-to-a-file">Setting standard input to a file</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#putting-it-all-together">Putting it all together</a></li></ol></li></ol></nav> <h1 id="competitive-programming" data-svelte-h="svelte-kq8sma"><a aria-hidden="true" tabindex="-1" href="#competitive-programming"><span class="icon icon-link"></span></a>Competitive Programming</h1> <p data-svelte-h="svelte-di1of1">I’m not the best Competitive Programmer, in fact I think it would be an overstatement to call me a Competitive Programmer.
I have probably participated in one competitive programming contest, but I have a deep admiration for people that perfect its craft.
However, I do prefer practicing algorithms and interview problems using competitive programming because you need to handle <strong>real input</strong>.
I love advent of code for the same reason, it feels like a more realistic exercise when you have to handle taking in and reporting data.
This is nothing against leetcode, it is a great resource, especially for interview prep but feels like you are working in more of a vacuum.</p> <p data-svelte-h="svelte-m1uthl">As a non competitive, competitive programming enthusiast I have practiced problems with multiple languages, even languages that are somewhat
ill suited for this task. If I had to do a real competition I would use <strong>C++</strong>, it combines a full standard library with performance and has
been the most used competitive programming language forever.</p> <p data-svelte-h="svelte-1k1p0ai">In this post I am just exploring several languages and how to set them up for competitive programming, mainly handling input.</p> <ol data-svelte-h="svelte-1kt4pb7"><li>Rust</li> <li>Go</li> <li>Zig</li></ol> <h1 id="handling-input-with-c" data-svelte-h="svelte-1c15l78"><a aria-hidden="true" tabindex="-1" href="#handling-input-with-c"><span class="icon icon-link"></span></a>handling input with C++</h1> <ul data-svelte-h="svelte-3qvtvn"><li>when completing a problem it is common practice to take the input into your program via a text file.
<ul><li>this comes with the issue of not wanting to write two solutions, one for stdin and one for reading a file</li></ul></li> <li>really <strong>simple</strong> and somewhat standardized as C++ is the defacto standard for competitive programming
<ul><li>no thinking out of the box required</li> <li>online judges will pass flags disabling the <code>freeopen</code> calls</li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#928374;font-style:italic">// use local files unless compiled with ONLINE_JUDGE flag</span></span>
<span class="line"><span style="color:#EA6962">#ifndef</span><span style="color:#D3869B"> ONLINE_JUDGE</span></span>
<span class="line"><span style="color:#A9B665">  freopen</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"input.txt"</span><span style="color:#D4BE98">, </span><span style="color:#D8A657">"r"</span><span style="color:#D4BE98">, stdin);</span><span style="color:#928374;font-style:italic">   // input</span></span>
<span class="line"><span style="color:#A9B665">  freopen</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"output.txt"</span><span style="color:#D4BE98">, </span><span style="color:#D8A657">"w"</span><span style="color:#D4BE98">, stdout);</span><span style="color:#928374;font-style:italic"> // output</span></span>
<span class="line"><span style="color:#EA6962">#endif</span></span>
<span class="line"><span style="color:#7DAEA3">int</span><span style="color:#D4BE98"> i;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">// then we can get input from stdin or 'input.txt'</span></span>
<span class="line"><span style="color:#928374;font-style:italic">// with</span></span>
<span class="line"><span style="color:#89B482">std</span><span style="color:#D4BE98">::cin </span><span style="color:#E78A4E">>></span><span style="color:#D4BE98"> i;</span></span>
<span class="line"><span style="color:#928374;font-style:italic">//or</span></span>
<span class="line"><span style="color:#A9B665">scanf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"</span><span style="color:#A9B665">%d</span><span style="color:#D8A657">"</span><span style="color:#D4BE98">, </span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">i);</span></span></code></pre><!-- HTML_TAG_END --> <h1 id="getting-input-with-rust" data-svelte-h="svelte-h55bae"><a aria-hidden="true" tabindex="-1" href="#getting-input-with-rust"><span class="icon icon-link"></span></a>Getting input with Rust</h1> <ul data-svelte-h="svelte-14wzrd6"><li><strong>Rust</strong> is the new kid on the block
<ul><li>it’s <em>very loved</em> (maybe too much)
<ul><li>does everything need to be rewritten???</li></ul></li> <li>great <em>build system &amp; package manager</em></li> <li>type <strong>safety</strong> and some memory safety guarantees</li> <li>also complicated but it seems like every added complexity has a <em>purpose</em></li></ul></li> <li><strong>types</strong> have to align and you have to defeat the <strong>borrow checker</strong> <ul><li>might seem frustrating at first but when it clicks it is <em>elegant</em></li></ul></li> <li>can’t use <em>simple macros</em> to switch between input types (file and stdin)</li> <li>manually <em>typing input</em> is painful and borderline impossible for some problems</li> <li>but if you <em>set file input</em> you will need to change your code to submit to an online judge</li> <li>output
<ul><li>much less complicated just use <code>println!</code></li> <li>not the best for performance (or so i’ve heard)
<ul><li>but the goal here is input and I think <code>println!</code> is fine</li></ul></li></ul></li> <li>what I love about this Rust implementation is how the types are used
<ul><li>it almost feels like magic being able to use <code>collect</code> with polymorphic types to
make the function determine what type to parse from the input.</li> <li>it almost feels like automated tetris where rust finds the type that fits.</li></ul></li></ul> <h2 id="handling-file-input" data-svelte-h="svelte-1truj1f"><a aria-hidden="true" tabindex="-1" href="#handling-file-input"><span class="icon icon-link"></span></a>handling file input</h2> <ul data-svelte-h="svelte-11ps3p"><li>example from Advent of Code
<ul><li>leveraging the <code>include_str!</code> macro</li> <li>embedds the file in the binary (good for AOC not for competitive programming)</li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#E78A4E">let</span><span style="color:#D4BE98"> input</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#7DAEA3">str</span><span style="color:#D4BE98">>>>> </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> include_str!</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">../input.txt</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#E78A4E">    .</span><span style="color:#A9B665">lines</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#E78A4E">    .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">l</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">  &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> x</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#7DAEA3">str</span><span style="color:#D4BE98">></span><span style="color:#E78A4E"> =</span><span style="color:#D4BE98"> l</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">: </span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        x</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">reverse</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        x</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">pop</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        x</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">reverse</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        x[</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;)</span></span>
<span class="line"><span style="color:#E78A4E">    .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">l</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#D4BE98"> x</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#7DAEA3">str</span><span style="color:#D4BE98">></span><span style="color:#E78A4E"> =</span><span style="color:#D4BE98"> l</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">; </span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#D4BE98"> y</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#7DAEA3">str</span><span style="color:#D4BE98">>></span><span style="color:#E78A4E"> =</span><span style="color:#D4BE98"> x</span></span>
<span class="line"><span style="color:#E78A4E">            .</span><span style="color:#A9B665">into_iter</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#E78A4E">            .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">g</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> g</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">, </span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">())</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#D4BE98"> z</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#7DAEA3">str</span><span style="color:#D4BE98">>>></span><span style="color:#E78A4E"> =</span><span style="color:#D4BE98"> y</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">into_iter</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#E78A4E">            .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">g</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> g</span></span>
<span class="line"><span style="color:#E78A4E">                .</span><span style="color:#A9B665">into_iter</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#E78A4E">                .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">c</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> c</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98"> "</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">())</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">())</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        z</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;)</span></span>
<span class="line"><span style="color:#E78A4E">    .</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="handling-standard-input" data-svelte-h="svelte-x9efds"><a aria-hidden="true" tabindex="-1" href="#handling-standard-input"><span class="icon icon-link"></span></a>handling standard input</h2> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">()</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> buffer </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(); </span><span style="color:#928374;font-style:italic">// empty String</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> stdin </span><span style="color:#E78A4E">=</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">stdin</span><span style="color:#D4BE98">(); </span><span style="color:#928374;font-style:italic">// standard input</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // read a line from stdin and assign to buffer</span></span>
<span class="line"><span style="color:#D4BE98">    stdin</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> buffer)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">    println!</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"&#123;&#125;"</span><span style="color:#D4BE98">, buffer);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="great-starter-template" data-svelte-h="svelte-k3qe00"><a aria-hidden="true" tabindex="-1" href="#great-starter-template"><span class="icon icon-link"></span></a>great starter template</h2> <ul data-svelte-h="svelte-1fupzpn"><li>from <em><a href="https://rustp.org/basic-programs/basic-template/" rel="nofollow">https://rustp.org/basic-programs/basic-template/</a></em></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#D4BE98">se </span><span style="color:#89B482">std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">stdin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> take_int</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> usize</span><span style="color:#D4BE98"> &#123; </span><span style="color:#928374;font-style:italic">// get int from stdin</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> input </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">    stdin</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> input)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#EA6962">    return</span><span style="color:#D4BE98"> input</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">trim</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">parse</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> take_vector</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">usize</span><span style="color:#D4BE98">></span><span style="color:#D4BE98"> &#123; </span><span style="color:#928374;font-style:italic">// get a vector of usize</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> input </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">    stdin</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> input)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> arr</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">usize</span><span style="color:#D4BE98">> </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> input</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">trim</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split_whitespace</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">x</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> x</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">parse</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">())</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#EA6962">    return</span><span style="color:#D4BE98"> arr;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> take_string</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">char</span><span style="color:#D4BE98">></span><span style="color:#D4BE98"> &#123; </span><span style="color:#928374;font-style:italic">// get a string as a vector of char</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> input </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">    stdin</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> input)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">unwrap</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> vec</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">char</span><span style="color:#D4BE98">> </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> input</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">trim</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">chars</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#EA6962">    return</span><span style="color:#D4BE98"> vec;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> to_string</span><span style="color:#D4BE98">(vec</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3">Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">char</span><span style="color:#D4BE98">>)</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> String</span><span style="color:#D4BE98">&#123; </span><span style="color:#928374;font-style:italic">// convert vec of char to String</span></span>
<span class="line"><span style="color:#EA6962">    return</span><span style="color:#D4BE98"> vec</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">iter</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">collect</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">String</span><span style="color:#D4BE98">>();</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="making-it-a-module" data-svelte-h="svelte-dbvr21"><a aria-hidden="true" tabindex="-1" href="#making-it-a-module"><span class="icon icon-link"></span></a>making it a module</h2> <ul data-svelte-h="svelte-1gq3uhi"><li>wrap in a <em>module</em>, and make functions public
<ul><li>easier importing</li> <li>no unused errors</li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#E78A4E">mod</span><span style="color:#D4BE98"> rcp &#123;</span></span>
<span class="line"><span style="color:#EA6962">    use</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">stdin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> take_int</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> usize</span></span>
<span class="line"><span style="color:#928374;font-style:italic">    //...</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">()</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> i </span><span style="color:#E78A4E">=</span><span style="color:#89B482"> rcp</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">take_int</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="making-it-type-polymorphic" data-svelte-h="svelte-mkbz0w"><a aria-hidden="true" tabindex="-1" href="#making-it-type-polymorphic"><span class="icon icon-link"></span></a>making it type polymorphic</h2> <ul data-svelte-h="svelte-1mxawvf"><li>the Rust type system lets you tell the function what type to return
<ul><li>achieved with <strong>type polymorphism</strong>, restricted with <em>Traits</em></li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#E78A4E">mod</span><span style="color:#D4BE98"> rcp &#123;</span></span>
<span class="line"><span style="color:#EA6962">    use</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">stdin;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> read</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">T</span><span style="color:#E78A4E">:</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">str</span><span style="color:#E78A4E">::</span><span style="color:#7DAEA3">FromStr</span><span style="color:#D4BE98">>()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> T</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> line </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">        stdin</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> line)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">read_line failed</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">        line</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">trim</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">parse</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">ok</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">failed to parse</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">()</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> message</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E"> =</span><span style="color:#A9B665"> read</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> float</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> f32</span><span style="color:#E78A4E"> =</span><span style="color:#A9B665"> read</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#A9B665">    println!</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"&#123;&#125;</span><span style="color:#D4BE98"> &#123;&#125;"</span><span style="color:#D4BE98">, message, float);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="adding-file-or-standard-input" data-svelte-h="svelte-1gc5fhl"><a aria-hidden="true" tabindex="-1" href="#adding-file-or-standard-input"><span class="icon icon-link"></span></a>adding file or standard input</h2> <ul data-svelte-h="svelte-1rm3llc"><li>add a function to init a <code>reader</code> <ul><li>corresponds to either a <em>file or stdin</em></li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#E78A4E">mod</span><span style="color:#D4BE98"> rcp &#123;</span></span>
<span class="line"><span style="color:#EA6962">    use</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">&#123;</span></span>
<span class="line"><span style="color:#89B482">        fs</span><span style="color:#E78A4E">::</span><span style="color:#7DAEA3">File</span><span style="color:#D4BE98">,</span></span>
<span class="line"><span style="color:#89B482">        io</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">&#123;</span><span style="color:#D3869B">self</span><span style="color:#D4BE98">, </span><span style="color:#7DAEA3">BufRead</span><span style="color:#D4BE98">, </span><span style="color:#7DAEA3">BufReader</span><span style="color:#D4BE98">&#125;,</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // returns a Boxed type that implements BufRead</span></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> init_reader</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> Box</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#EA6962">dyn</span><span style="color:#7DAEA3"> BufRead</span><span style="color:#D4BE98">></span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#EA6962">        if</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">env</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">args</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">any</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">arg</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> arg</span><span style="color:#E78A4E"> ==</span><span style="color:#D4BE98"> "</span><span style="color:#D8A657">--file</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">) &#123; </span><span style="color:#928374;font-style:italic">// &#96;cargo run -- --file&#96;</span></span>
<span class="line"><span style="color:#7DAEA3">            Box</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">BufReader</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span></span>
<span class="line"><span style="color:#89B482">                File</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">open</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">input.txt</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">failed to open 'input.txt'</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">),</span></span>
<span class="line"><span style="color:#D4BE98">            ))</span></span>
<span class="line"><span style="color:#D4BE98">        &#125; </span><span style="color:#EA6962">else</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#7DAEA3">            Box</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">BufReader</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">stdin</span><span style="color:#D4BE98">()))</span></span>
<span class="line"><span style="color:#D4BE98">        &#125;</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E78A4E">    ...</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="final-template" data-svelte-h="svelte-1ok8rjs"><a aria-hidden="true" tabindex="-1" href="#final-template"><span class="icon icon-link"></span></a>final template</h2> <ul data-svelte-h="svelte-vkypy3"><li>putting it all together
<ul><li>only downside is we need to <em>pass the reader</em> around</li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#E78A4E">mod</span><span style="color:#D4BE98"> rcp &#123;</span></span>
<span class="line"><span style="color:#EA6962">    use</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">&#123;</span></span>
<span class="line"><span style="color:#89B482">        fs</span><span style="color:#E78A4E">::</span><span style="color:#7DAEA3">File</span><span style="color:#D4BE98">,</span></span>
<span class="line"><span style="color:#89B482">        io</span><span style="color:#E78A4E">::</span><span style="color:#D4BE98">&#123;</span><span style="color:#D3869B">self</span><span style="color:#D4BE98">, </span><span style="color:#7DAEA3">BufRead</span><span style="color:#D4BE98">, </span><span style="color:#7DAEA3">BufReader</span><span style="color:#D4BE98">&#125;,</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> read</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">T</span><span style="color:#E78A4E">:</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">str</span><span style="color:#E78A4E">::</span><span style="color:#7DAEA3">FromStr</span><span style="color:#D4BE98">>(reader</span><span style="color:#E78A4E">:</span><span style="color:#E78A4E"> &#x26;mut</span><span style="color:#EA6962"> impl</span><span style="color:#7DAEA3"> BufRead</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> T</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> line </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        reader</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> line)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">read_line failed</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">        line</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">trim</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">parse</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">ok</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">failed to parse</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> read_vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">T</span><span style="color:#E78A4E">:</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">str</span><span style="color:#E78A4E">::</span><span style="color:#7DAEA3">FromStr</span><span style="color:#D4BE98">>(reader</span><span style="color:#E78A4E">:</span><span style="color:#E78A4E"> &#x26;mut</span><span style="color:#EA6962"> impl</span><span style="color:#7DAEA3"> BufRead</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">T</span><span style="color:#D4BE98">></span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> line </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        reader</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> line)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">read_line failed</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">        line</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">split_whitespace</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#E78A4E">            .</span><span style="color:#A9B665">map</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">s</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> s</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">parse</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">ok</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">failed to parse</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">))</span></span>
<span class="line"><span style="color:#E78A4E">            .</span><span style="color:#A9B665">collect</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // throw away empty lines</span></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> empty_line</span><span style="color:#D4BE98">(reader</span><span style="color:#E78A4E">:</span><span style="color:#E78A4E"> &#x26;mut</span><span style="color:#EA6962"> impl</span><span style="color:#7DAEA3"> BufRead</span><span style="color:#D4BE98">)</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">        let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> dummy </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">        reader</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">read_line</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> dummy)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">ok</span><span style="color:#D4BE98">();</span></span>
<span class="line"><span style="color:#D4BE98">    &#125; </span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">    pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> init_reader</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E"> -></span><span style="color:#7DAEA3"> Box</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#EA6962">dyn</span><span style="color:#7DAEA3"> BufRead</span><span style="color:#D4BE98">></span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#EA6962">        if</span><span style="color:#89B482"> std</span><span style="color:#E78A4E">::</span><span style="color:#89B482">env</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">args</span><span style="color:#D4BE98">()</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">any</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">arg</span><span style="color:#E78A4E">|</span><span style="color:#D4BE98"> arg</span><span style="color:#E78A4E"> ==</span><span style="color:#D4BE98"> "</span><span style="color:#D8A657">--file</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">) &#123;</span></span>
<span class="line"><span style="color:#7DAEA3">            Box</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">BufReader</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span></span>
<span class="line"><span style="color:#89B482">                File</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">open</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">input.txt</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">)</span><span style="color:#E78A4E">.</span><span style="color:#A9B665">expect</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">failed to open 'input.txt'</span><span style="color:#D4BE98">"</span><span style="color:#D4BE98">),</span></span>
<span class="line"><span style="color:#D4BE98">            ))</span></span>
<span class="line"><span style="color:#D4BE98">        &#125; </span><span style="color:#EA6962">else</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#7DAEA3">            Box</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">BufReader</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">new</span><span style="color:#D4BE98">(</span><span style="color:#89B482">io</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">stdin</span><span style="color:#D4BE98">()))</span></span>
<span class="line"><span style="color:#D4BE98">        &#125;</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="using-the-template" data-svelte-h="svelte-a6vplf"><a aria-hidden="true" tabindex="-1" href="#using-the-template"><span class="icon icon-link"></span></a>using the template</h2> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#EA6962">pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">()</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#E78A4E"> mut</span><span style="color:#D4BE98"> reader </span><span style="color:#E78A4E">=</span><span style="color:#89B482"> rcp</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">init_reader</span><span style="color:#D4BE98">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> num</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> usize</span><span style="color:#E78A4E"> =</span><span style="color:#89B482"> rcp</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">read</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> reader);</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> word</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> String</span><span style="color:#E78A4E"> =</span><span style="color:#89B482"> rcp</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">read</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> reader);</span></span>
<span class="line"><span style="color:#E78A4E">    let</span><span style="color:#D4BE98"> vec</span><span style="color:#E78A4E">:</span><span style="color:#7DAEA3"> Vec</span><span style="color:#D4BE98">&#x3C;</span><span style="color:#7DAEA3">String</span><span style="color:#D4BE98">> </span><span style="color:#E78A4E">=</span><span style="color:#89B482"> rcp</span><span style="color:#E78A4E">::</span><span style="color:#A9B665">read_vec</span><span style="color:#D4BE98">(</span><span style="color:#E78A4E">&#x26;mut</span><span style="color:#D4BE98"> reader);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A9B665">    println!</span><span style="color:#D4BE98">(</span><span style="color:#D4BE98">"</span><span style="color:#D8A657">input -> </span><span style="color:#D4BE98">&#123;&#125;</span><span style="color:#D8A657">, </span><span style="color:#D4BE98">&#123;&#125;</span><span style="color:#D8A657">, </span><span style="color:#D4BE98">&#123;</span><span style="color:#D8A657">:?</span><span style="color:#D4BE98">&#125;"</span><span style="color:#D4BE98">, num, word, vec);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h1 id="getting-input-with-go" data-svelte-h="svelte-14h3a2i"><a aria-hidden="true" tabindex="-1" href="#getting-input-with-go"><span class="icon icon-link"></span></a>Getting input with Go</h1> <p data-svelte-h="svelte-tyyr7a">Go is a great language. Despite the hate it seems to receive from the PL community I think it’s great. It was designed for development, you have an idea and you don’t want to get caught up in the language you’re using. It’s not the best for research but for software engineering it is great.</p> <p data-svelte-h="svelte-1kn6v5o">It’s simplicity can be seen in the simplicity of using it to parse input from Stdin or from a file without changing your code.</p> <h2 id="how-to-set-stdin" data-svelte-h="svelte-far37f"><a aria-hidden="true" tabindex="-1" href="#how-to-set-stdin"><span class="icon icon-link"></span></a>How to set Stdin</h2> <ul data-svelte-h="svelte-afqgob"><li>one of the nice things about Go is its standard library</li> <li>we can import <code>os</code> and tell Go what should be used as Stdin</li> <li>we just need to “pipe” this text into Stdin</li> <li>wrapping this in a function allows us to use the same code for solving and submitting a problem, only having to comment out one line</li> <li>once our file is used for Stdin we can use the <code>fmt</code> function <code>Scanf</code> as usual!</li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#89B482">import</span><span style="color:#D4BE98"> (</span></span>
<span class="line"><span style="color:#D8A657">	"fmt"</span></span>
<span class="line"><span style="color:#D8A657">	"log"</span></span>
<span class="line"><span style="color:#D8A657">	"os"</span></span>
<span class="line"><span style="color:#D4BE98">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">func</span><span style="color:#A9B665"> setStdin</span><span style="color:#D4BE98">(file </span><span style="color:#7DAEA3">string</span><span style="color:#D4BE98">) &#123;</span></span>
<span class="line"><span style="color:#928374;font-style:italic">	// text []byte -> compatible with os.Stdin</span></span>
<span class="line"><span style="color:#D4BE98">	text, err </span><span style="color:#E78A4E">:=</span><span style="color:#D4BE98"> os.</span><span style="color:#A9B665">ReadFile</span><span style="color:#D4BE98">(file)</span></span>
<span class="line"><span style="color:#EA6962">	if</span><span style="color:#D4BE98"> err </span><span style="color:#E78A4E">!=</span><span style="color:#D3869B"> nil</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#D4BE98">		log.</span><span style="color:#A9B665">Fatal</span><span style="color:#D4BE98">(err)</span></span>
<span class="line"><span style="color:#D4BE98">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">	// reader and writer</span></span>
<span class="line"><span style="color:#D4BE98">	r, w, err </span><span style="color:#E78A4E">:=</span><span style="color:#D4BE98"> os.</span><span style="color:#A9B665">Pipe</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#EA6962">	if</span><span style="color:#D4BE98"> err </span><span style="color:#E78A4E">!=</span><span style="color:#D3869B"> nil</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#D4BE98">		log.</span><span style="color:#A9B665">Fatal</span><span style="color:#D4BE98">(err)</span></span>
<span class="line"><span style="color:#D4BE98">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">	// set os.Stdin to our reader</span></span>
<span class="line"><span style="color:#928374;font-style:italic">    // this will "read" what is written from our input file</span></span>
<span class="line"><span style="color:#D4BE98">	os.Stdin </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">	// ignore number of bytes written and write file data to writer</span></span>
<span class="line"><span style="color:#928374;font-style:italic">    // this text will then be able to be read from our "reader" r</span></span>
<span class="line"><span style="color:#D4BE98">	_, err </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> w.</span><span style="color:#A9B665">Write</span><span style="color:#D4BE98">(text)</span></span>
<span class="line"><span style="color:#EA6962">	if</span><span style="color:#D4BE98"> err </span><span style="color:#E78A4E">!=</span><span style="color:#D3869B"> nil</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#D4BE98">		log.</span><span style="color:#A9B665">Fatal</span><span style="color:#D4BE98">(err)</span></span>
<span class="line"><span style="color:#D4BE98">	&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">	// close writer</span></span>
<span class="line"><span style="color:#D4BE98">	w.</span><span style="color:#A9B665">Close</span><span style="color:#D4BE98">()</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">func</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">() &#123;</span></span>
<span class="line"><span style="color:#A9B665">	setStdin</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"input.txt"</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#928374;font-style:italic">    // we can now use &#96;fmt.Scanf&#96; as we would if we were reading from standard input</span></span>
<span class="line"><span style="color:#E78A4E">    ...</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h1 id="getting-input-with-zig" data-svelte-h="svelte-hgh6dk"><a aria-hidden="true" tabindex="-1" href="#getting-input-with-zig"><span class="icon icon-link"></span></a>Getting input with Zig</h1> <p data-svelte-h="svelte-1wna8zy">Zig was the hardest language to get working. I really enjoy the language and appreciate its goals for low level programming.
However, I don’t think I’ll ever write much Zig as most of my work and research falls outside of its intended use cases.
I am not a low level programmer but if I become one Zig would be one of my tools for sure.</p> <p data-svelte-h="svelte-1rkbexi">Trying to get input from a file without changing the code that reads from input with Zig’s standard library was too difficult.
So I leveraged one of Zig’s greatest strengths, it’s <strong>C FFI</strong>. C has <code>scanf</code> and <code>printf</code>, so I wrapped them with Zig functions to make their use more seamless.</p> <h2 id="importing-c-libraries-with-zig" data-svelte-h="svelte-71fcah"><a aria-hidden="true" tabindex="-1" href="#importing-c-libraries-with-zig"><span class="icon icon-link"></span></a>importing C libraries with Zig</h2> <p data-svelte-h="svelte-1g8m108">Importing a C library is fairly simple with <code>@cImport</code>. However, when using C functions that return any value (scanf returns an int) that value has to be explicitly ignored.</p> <p data-svelte-h="svelte-cipsyz">But the <code>_ = scanf(...)</code> is pretty cumbersome so I opted to wrap these functions.</p> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> cStdio </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> @cImport</span><span style="color:#D4BE98">(&#123;</span></span>
<span class="line"><span style="color:#A9B665">    @cInclude</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"stdio.h"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;);</span></span>
<span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> cString </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> @cImport</span><span style="color:#D4BE98">(&#123;</span></span>
<span class="line"><span style="color:#A9B665">    @cInclude</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"string.h"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;);</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="string-representations-in-zig" data-svelte-h="svelte-veg8cu"><a aria-hidden="true" tabindex="-1" href="#string-representations-in-zig"><span class="icon icon-link"></span></a>String representations in Zig</h2> <p data-svelte-h="svelte-19rudsx">Strings in Zig can be a little weird, mainly because they differ from C strings (arrays of chars), and might need to be massaged slightly to be used in imported C functions. In order to pass strings from Zig to C we use a special type…</p> <ul data-svelte-h="svelte-1b46971"><li><code>[*:0]const u8</code> <ul><li>null-terminated C string</li></ul></li></ul> <h2 id="wrapping-c-functions-with-zig" data-svelte-h="svelte-1o1891o"><a aria-hidden="true" tabindex="-1" href="#wrapping-c-functions-with-zig"><span class="icon icon-link"></span></a>Wrapping C functions with Zig</h2> <p data-svelte-h="svelte-upgpjx">One of Zig’s most attractive features is the Union (or Sum) type. This let’s us write functions that can throw errors, denoted with <code>!</code>.</p> <p data-svelte-h="svelte-12mo2ip">To encapsulate possible errors from the <code>scanf</code> and <code>printf</code> functions I created the <code>CStudio</code> error type</p> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> CStdioError </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> error</span><span style="color:#D4BE98">&#123;</span></span>
<span class="line"><span style="color:#D4BE98">    printfError,</span></span>
<span class="line"><span style="color:#D4BE98">    scanfError,</span></span>
<span class="line"><span style="color:#D4BE98">    fgetsError,</span></span>
<span class="line"><span style="color:#D4BE98">    freopenError,</span></span>
<span class="line"><span style="color:#D4BE98">&#125;;</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-135zzgb">It is now easy to wrap a function and show that it can fail. For example, this is how <code>scanf</code> is wrapped.</p> <ul data-svelte-h="svelte-zal1js"><li><code>anytype</code> <ul><li>accept any value(s), variadic-style</li></ul></li> <li><code>@call(.auto, ...)</code> <ul><li>call a function with automatic calling convention</li></ul></li> <li><code>.{a} ++ b</code> <ul><li>build a new tuple starting with b, then appending b</li></ul></li></ul> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#928374;font-style:italic">// &#96;scanf&#96; wrapper</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(restrict: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">, args: </span><span style="color:#7DAEA3">anytype</span><span style="color:#D4BE98">) </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#EA6962">    if</span><span style="color:#D4BE98"> (</span><span style="color:#A9B665">@call</span><span style="color:#D4BE98">(.auto, cStdio.scanf, .&#123;restrict&#125; </span><span style="color:#E78A4E">++</span><span style="color:#D4BE98"> args) </span><span style="color:#E78A4E">&#x3C;</span><span style="color:#D3869B"> 1</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.scanfError;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <p data-svelte-h="svelte-112mie4">Using the wrapped function feels almost native and allows for the competitive programming flow many are used to.</p> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#EA6962">var</span><span style="color:#D4BE98"> i: </span><span style="color:#7DAEA3">i32</span><span style="color:#E78A4E"> =</span><span style="color:#EA6962"> undefined</span><span style="color:#D4BE98">;</span></span>
<span class="line"><span style="color:#EA6962">var</span><span style="color:#D4BE98"> s: [</span><span style="color:#D3869B">30</span><span style="color:#D4BE98">]</span><span style="color:#7DAEA3">u8</span><span style="color:#E78A4E"> =</span><span style="color:#EA6962"> undefined</span><span style="color:#D4BE98">;</span></span>
<span class="line"><span style="color:#EA6962">try</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%d"</span><span style="color:#D4BE98">, .&#123;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">i&#125;);</span></span>
<span class="line"><span style="color:#928374;font-style:italic">// in C &#96;s&#96; decays into a pointer, not in zig!</span></span>
<span class="line"><span style="color:#EA6962">try</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%s"</span><span style="color:#D4BE98">, .&#123;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">s&#125;);</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="setting-standard-input-to-a-file" data-svelte-h="svelte-1yim5jv"><a aria-hidden="true" tabindex="-1" href="#setting-standard-input-to-a-file"><span class="icon icon-link"></span></a>Setting standard input to a file</h2> <p data-svelte-h="svelte-q3o1am">This was “more of the same” in that I opted to wrap C functions for the task. However, due to a known number of function arguments it is much more simple.</p> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#928374;font-style:italic">// set &#96;stdin&#96; and &#96;stdout&#96; to files</span></span>
<span class="line"><span style="color:#928374;font-style:italic">// must take in &#96;[*:0]const u8&#96; to be compatible with C</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> fileIO</span><span style="color:#D4BE98">(input: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">, output: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">) </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#D4BE98">    _ </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> cStdio.</span><span style="color:#A9B665">freopen</span><span style="color:#D4BE98">(input, </span><span style="color:#D8A657">"r"</span><span style="color:#D4BE98">, cStdio.</span><span style="color:#A9B665">stdin</span><span style="color:#D4BE98">()) </span><span style="color:#EA6962">orelse</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.freopenError;</span></span>
<span class="line"><span style="color:#D4BE98">    _ </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> cStdio.</span><span style="color:#A9B665">freopen</span><span style="color:#D4BE98">(output, </span><span style="color:#D8A657">"w"</span><span style="color:#D4BE98">, cStdio.</span><span style="color:#A9B665">stdout</span><span style="color:#D4BE98">()) </span><span style="color:#EA6962">orelse</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.freopenError;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --> <h2 id="putting-it-all-together" data-svelte-h="svelte-1a04jl7"><a aria-hidden="true" tabindex="-1" href="#putting-it-all-together"><span class="icon icon-link"></span></a>Putting it all together</h2> <p data-svelte-h="svelte-15qswqs">Adding everything together shows how useful and painless wrapping C functions in Zig can be. I added a parameter to the program allowing for a filename to be passed
in order to set standard input / output to files.</p> <!-- HTML_TAG_START --><pre class="shiki gruvbox" style="background-color:#292828;color:#d4be98" tabindex="0"><code><span class="line"><span style="color:#928374;font-style:italic">// zig imports</span></span>
<span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> std </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> @import</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"std"</span><span style="color:#D4BE98">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">// c imports</span></span>
<span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> cStdio </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> @cImport</span><span style="color:#D4BE98">(&#123;</span></span>
<span class="line"><span style="color:#A9B665">    @cInclude</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"stdio.h"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;);</span></span>
<span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> cString </span><span style="color:#E78A4E">=</span><span style="color:#A9B665"> @cImport</span><span style="color:#D4BE98">(&#123;</span></span>
<span class="line"><span style="color:#A9B665">    @cInclude</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"string.h"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">const</span><span style="color:#D4BE98"> CStdioError </span><span style="color:#E78A4E">=</span><span style="color:#7DAEA3"> error</span><span style="color:#D4BE98">&#123;</span></span>
<span class="line"><span style="color:#D4BE98">    printfError,</span></span>
<span class="line"><span style="color:#D4BE98">    scanfError,</span></span>
<span class="line"><span style="color:#D4BE98">    fgetsError,</span></span>
<span class="line"><span style="color:#D4BE98">    freopenError,</span></span>
<span class="line"><span style="color:#D4BE98">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">// &#96;printf&#96; wrapper</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> c_printf</span><span style="color:#D4BE98">(restrict: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">, args: </span><span style="color:#7DAEA3">anytype</span><span style="color:#D4BE98">) </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#EA6962">    if</span><span style="color:#D4BE98"> (</span><span style="color:#A9B665">@call</span><span style="color:#D4BE98">(.auto, cStdio.printf, .&#123;restrict&#125; </span><span style="color:#E78A4E">++</span><span style="color:#D4BE98"> args) </span><span style="color:#E78A4E">&#x3C;</span><span style="color:#D3869B"> 1</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.printfError;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">// &#96;scanf&#96; wrapper</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(restrict: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">, args: </span><span style="color:#7DAEA3">anytype</span><span style="color:#D4BE98">) </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#EA6962">    if</span><span style="color:#D4BE98"> (</span><span style="color:#A9B665">@call</span><span style="color:#D4BE98">(.auto, cStdio.scanf, .&#123;restrict&#125; </span><span style="color:#E78A4E">++</span><span style="color:#D4BE98"> args) </span><span style="color:#E78A4E">&#x3C;</span><span style="color:#D3869B"> 1</span><span style="color:#D4BE98">)</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.scanfError;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">// set &#96;stdin&#96; and &#96;stdout&#96; to files</span></span>
<span class="line"><span style="color:#EA6962">fn</span><span style="color:#A9B665"> fileIO</span><span style="color:#D4BE98">(input: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">, output: [</span><span style="color:#E78A4E">*</span><span style="color:#D4BE98">:</span><span style="color:#D3869B">0</span><span style="color:#D4BE98">]</span><span style="color:#EA6962">const</span><span style="color:#7DAEA3"> u8</span><span style="color:#D4BE98">) </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#D4BE98">    _ </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> cStdio.</span><span style="color:#A9B665">freopen</span><span style="color:#D4BE98">(input, </span><span style="color:#D8A657">"r"</span><span style="color:#D4BE98">, cStdio.</span><span style="color:#A9B665">stdin</span><span style="color:#D4BE98">()) </span><span style="color:#EA6962">orelse</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.freopenError;</span></span>
<span class="line"><span style="color:#D4BE98">    _ </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> cStdio.</span><span style="color:#A9B665">freopen</span><span style="color:#D4BE98">(output, </span><span style="color:#D8A657">"w"</span><span style="color:#D4BE98">, cStdio.</span><span style="color:#A9B665">stdout</span><span style="color:#D4BE98">()) </span><span style="color:#EA6962">orelse</span></span>
<span class="line"><span style="color:#EA6962">        return</span><span style="color:#D4BE98"> CStdioError.freopenError;</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#EA6962">pub</span><span style="color:#EA6962"> fn</span><span style="color:#A9B665"> main</span><span style="color:#D4BE98">() </span><span style="color:#E78A4E">!</span><span style="color:#7DAEA3">void</span><span style="color:#D4BE98"> &#123;</span></span>
<span class="line"><span style="color:#928374;font-style:italic">    // check for &#96;--file&#96; flag</span></span>
<span class="line"><span style="color:#EA6962">    const</span><span style="color:#D4BE98"> flag </span><span style="color:#E78A4E">=</span><span style="color:#D8A657"> "--file"</span><span style="color:#D4BE98">;</span></span>
<span class="line"><span style="color:#EA6962">    const</span><span style="color:#D4BE98"> args </span><span style="color:#E78A4E">=</span><span style="color:#D4BE98"> std.os.argv;</span></span>
<span class="line"><span style="color:#EA6962">    if</span><span style="color:#D4BE98"> (args.len </span><span style="color:#E78A4E">></span><span style="color:#D3869B"> 1</span><span style="color:#EA6962"> and</span><span style="color:#D4BE98"> cString.</span><span style="color:#A9B665">strlen</span><span style="color:#D4BE98">(flag) </span><span style="color:#E78A4E">==</span><span style="color:#D4BE98"> cString.</span><span style="color:#A9B665">strlen</span><span style="color:#D4BE98">(args[</span><span style="color:#D3869B">1</span><span style="color:#D4BE98">])) &#123;</span></span>
<span class="line"><span style="color:#EA6962">        for</span><span style="color:#D4BE98"> (flag, args[</span><span style="color:#D3869B">1</span><span style="color:#D4BE98">]) </span><span style="color:#E78A4E">|</span><span style="color:#D4BE98">a, b</span><span style="color:#E78A4E">|</span></span>
<span class="line"><span style="color:#EA6962">            if</span><span style="color:#D4BE98"> (a </span><span style="color:#E78A4E">==</span><span style="color:#D4BE98"> b)</span></span>
<span class="line"><span style="color:#EA6962">                continue</span></span>
<span class="line"><span style="color:#EA6962">            else</span></span>
<span class="line"><span style="color:#EA6962">                break</span><span style="color:#D4BE98">;</span></span>
<span class="line"><span style="color:#EA6962">        try</span><span style="color:#A9B665"> fileIO</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"input.txt"</span><span style="color:#D4BE98">, </span><span style="color:#D8A657">"output.txt"</span><span style="color:#D4BE98">);</span></span>
<span class="line"><span style="color:#D4BE98">    &#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // declare variables to be read in</span></span>
<span class="line"><span style="color:#EA6962">    var</span><span style="color:#D4BE98"> i: </span><span style="color:#7DAEA3">i32</span><span style="color:#E78A4E"> =</span><span style="color:#EA6962"> undefined</span><span style="color:#D4BE98">;</span></span>
<span class="line"><span style="color:#EA6962">    var</span><span style="color:#D4BE98"> s: [</span><span style="color:#D3869B">30</span><span style="color:#D4BE98">]</span><span style="color:#7DAEA3">u8</span><span style="color:#E78A4E"> =</span><span style="color:#EA6962"> undefined</span><span style="color:#D4BE98">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // read &#96;i&#96; and &#96;s&#96;</span></span>
<span class="line"><span style="color:#EA6962">    try</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%d"</span><span style="color:#D4BE98">, .&#123;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">i&#125;);</span></span>
<span class="line"><span style="color:#EA6962">    try</span><span style="color:#A9B665"> c_scanf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%s"</span><span style="color:#D4BE98">, .&#123;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">s&#125;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#928374;font-style:italic">    // print &#96;i&#96; and &#96;s&#96;</span></span>
<span class="line"><span style="color:#EA6962">    try</span><span style="color:#A9B665"> c_printf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%d</span><span style="color:#A9B665">&#92;n</span><span style="color:#D8A657">"</span><span style="color:#D4BE98">, .&#123;i&#125;);</span></span>
<span class="line"><span style="color:#EA6962">    try</span><span style="color:#A9B665"> c_printf</span><span style="color:#D4BE98">(</span><span style="color:#D8A657">"%s</span><span style="color:#A9B665">&#92;n</span><span style="color:#D8A657">"</span><span style="color:#D4BE98">, .&#123;</span><span style="color:#E78A4E">&#x26;</span><span style="color:#D4BE98">s&#125;);</span></span>
<span class="line"><span style="color:#D4BE98">&#125;</span></span></code></pre><!-- HTML_TAG_END --></article> </div></div> <footer class="text-center mt-auto" data-svelte-h="svelte-1ej1xq0"><div class="container p-2"><section class="mb-0"> <a class="btn btn-outline-light btn-floating m-1" href="https://www.youtube.com/channel/UCsFz3xPT6LXXWcq_EbB1r-Q" role="button"><i class="fab fa-youtube"></i></a>        <a class="btn btn-outline-light btn-floating m-1" href="https://www.linkedin.com/in/cade-lueker-79a55b199/" role="button"><i class="fab fa-linkedin-in"></i></a>  <a class="btn btn-outline-light btn-floating m-1" href="https://www.github.com/cademichael/" role="button"><i class="fab fa-github"></i></a></section></div> <div class="text-center p-3 copyright">Made with [ <img src="/svelte-icon.svg" alt="Svelte" class="icon-svelte"> +
    <i class="fab fa-sass"></i>
    + <i class="fab fa-markdown"></i> ]</div></footer> 
			
			<script>
				{
					__sveltekit_19dxjvd = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.DNDbD3y4.js"),
						import("../_app/immutable/entry/app.GELVEbAP.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 5],
							data: [null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
<style>
  body {
    background-color: #fbf1c7;
  }
</style>
